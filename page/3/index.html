<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>zili&#39;s Utopia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="zili&#39;s Utopia">
<meta property="og:url" content="http://www.jinzili.cc/page/3/index.html">
<meta property="og:site_name" content="zili&#39;s Utopia">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zili&#39;s Utopia">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome5/css/fontawesome.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-brands.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-solid.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">zili&#39;s Utopia</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/é‡‘è‡ªåŠ›">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fas fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="æœç´¢" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..." />
            <span class="ins-close ins-selectable"><i class="fas fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
            UNTITLED: '(æœªå‘½å)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/é‡‘è‡ªåŠ›">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="æœç´¢" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">é‡‘è‡ªåŠ›</h2>
            <h3 id="title">Web Developer &amp; Designer</h3>
            <span id="location"><i class="fas fa-map-marker-alt" style="padding-right: 5px"></i>ShangHai, China</span>
            <a id="follow" target="_blank" href="https://github.com/Jinzili">å…³æ³¨æˆ‘</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                41
                <span>æ–‡ç« </span>
            </div>
            <div class="article-info-block">
                49
                <span>æ ‡ç­¾</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/Jinzili" target="_blank" title="github" class=tooltip>
                            <i class="fab fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fab fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fab fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fab fa-dribbble"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-Hibernate-no-longer-referencedå¼‚å¸¸" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2018/01/04/Hibernate-no-longer-referencedå¼‚å¸¸/">Hibernate - no longer referencedå¼‚å¸¸</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2018/01/04/Hibernate-no-longer-referencedå¼‚å¸¸/">
            <time datetime="2018-01-04T10:09:17.000Z" itemprop="datePublished">2018-01-04</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Java-Framework/">Java Framework</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Hibernate/">Hibernate</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>åœ¨ä½¿ç”¨hibernateçº§è”å…³ç³»æ—¶ç»™äº†æˆ‘ä»¬æå¤§çš„ä¾¿åˆ©ï¼Œä½†æ˜¯æœ‰æ—¶ä¹Ÿä¼šå‡ºç°è«åå…¶å¦™çš„å¼‚å¸¸ï¼Œä»£ç æ€ä¹ˆçœ‹éƒ½æ²¡æœ‰é—®é¢˜ï¼Œsaveçš„æ—¶å€™å°±æ˜¯æŠ›å‡ºäº†å¼‚å¸¸(æ°”ğŸ˜ )ã€‚</p>
<p>æœ€è¿‘å°±è¢«åŒäº‹é—®åˆ°äº†è¿™æ ·çš„é—®é¢˜ï¼Œè°ƒç”¨saveçš„æ—¶å€™æŠ›å‡ºäº†è¿™ä¸ªå¼‚å¸¸ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.hibernate.HibernateException:</span><br><span class="line">A collection with cascade=<span class="string">"all-delete-orphan"</span> was no longer referenced by the owning entity instance</span><br></pre></td></tr></table></figure>
<p>å­—é¢æ„æ€æ˜¯è¯´ï¼Œè¿™ä¸ªentityä¸å†æ‹¥æœ‰å®ä¾‹çš„å¼•ç”¨ï¼Œæˆ‘ä»¬åå¤æ£€æŸ¥äº†ä»£ç éƒ½æ²¡æœ‰å‘ç°é—®é¢˜ã€‚ã€‚ã€‚ã€‚</p>
<p>ç»è¿‡ä¸€é¡¿æ“ä½œä¹‹åï¼ˆgoogleğŸ˜ï¼‰ï¼Œç»ˆäºå‘ç°äº†é—®é¢˜ã€‚</p>
<p>åœ¨ä¸€ä¸ªone to manyå…³ç³»æ—¶ï¼Œä¸€çš„é‚£ä¸€æ–¹æˆ‘ä»¬å®šä¹‰äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@OneToMany</span>(cascade = CascadeType.ALL, mappedBy = <span class="string">"parent"</span>, orphanRemoval = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">private</span> List&lt;Children&gt; childs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>
<p>é—®é¢˜å°±å‡ºåœ¨orphanRemoval=trueè¿™é‡Œï¼Œå½“è¿™ä¸ªå€¼ä¸ºtrueæ—¶ï¼Œhibernateä¼šå¸®æˆ‘ä»¬ç®¡ç†è¿™ä¸ªå­é›†åˆï¼Œæ‰€æœ‰å½“childsä¸ºnullæˆ–è°ƒç”¨æ™®é€šçš„setæ–¹æ³•æ—¶ï¼Œå°±ä¼šæŠ›å‡ºä¸Šé¢è¿™ä¸ªå¼‚å¸¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChilds</span><span class="params">(List&lt;Children&gt; childs)</span></span>&#123;</span><br><span class="line">    <span class="comment">// will throw exception like this</span></span><br><span class="line">    <span class="keyword">this</span>.childs = childs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªæ–°çš„childsä»£æ›¿äº†åŸæœ¬çš„childsï¼Œå¯¼è‡´parentå®ä½“ä¸åŸæœ¬çš„childsä¹‹é—´çš„å…³ç³»è¢«ç ´åäº†ï¼Œä½†æ˜¯åŸæœ¬çš„childsè¿˜å­˜åœ¨äºè¿™ä¸€ä¸ªsessionä¸­ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è°ƒç”¨saveçš„æ—¶å€™ï¼ŒåŸæœ¬çš„childsä¸parentä¹‹é—´å…³ç³»è¢«ç ´åï¼Œhibernateä¸è®¤è¯†äº†åŸæœ¬çš„childsï¼Œå°±ä¼šthrowä¸Šé¢çš„å¼‚å¸¸ã€‚</p>
<p>å½“çŸ¥é“äº†ä¸ºä»€ä¹ˆä¹‹åï¼Œäº‹æƒ…å°±å¥½åŠäº†ï¼Œæˆ‘ä»¬éœ€è¦å¯¹setæ–¹æ³•è¿›è¡Œæ”¹é€ ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChilds</span><span class="params">(List&lt;Children&gt; childs)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.childs.clear();</span><br><span class="line">    <span class="keyword">this</span>.childs.addAll(childs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·childså’Œparentä¹‹é—´çš„å…³ç³»æ²¡æœ‰è¢«ç ´åï¼Œå½“ç„¶saveçš„æ—¶å€™hibernateä¹Ÿå°±è®¤è¯†äº†è¿™ä¸ªchildså•¦ã€‚</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2018/01/04/Hibernate-no-longer-referencedå¼‚å¸¸/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Javaæ·±åº¦æ‹·è´-CloneUtils" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/12/23/Javaæ·±åº¦æ‹·è´-CloneUtils/">Javaæ·±åº¦æ‹·è´:CloneUtils</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/12/23/Javaæ·±åº¦æ‹·è´-CloneUtils/">
            <time datetime="2017-12-23T09:26:46.000Z" itemprop="datePublished">2017-12-23</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/JavaBase/">JavaBase</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Deep-Clone/">Deep Clone</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * FUNCTION</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zili</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2017-12-23 17:17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CloneUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Serializable&gt; <span class="function">T <span class="title">deepClone</span><span class="params">(T obj)</span> </span>&#123;</span><br><span class="line">        T cloneObj = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å†™å…¥å­—èŠ‚æµ</span></span><br><span class="line">            ByteArrayOutputStream out = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            ObjectOutputStream obs = <span class="keyword">new</span> ObjectOutputStream(out);</span><br><span class="line">            obs.writeObject(obj);</span><br><span class="line">            obs.close();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆ†é…å†…å­˜, å†™å…¥åŸå§‹å¯¹è±¡, ç”Ÿæˆæ–°å¯¹è±¡</span></span><br><span class="line">            ByteArrayInputStream ios = <span class="keyword">new</span> ByteArrayInputStream(out.toByteArray());</span><br><span class="line">            ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(ios);</span><br><span class="line">            <span class="comment">// è¿”å›ç”Ÿæˆçš„æ–°å¯¹è±¡</span></span><br><span class="line">            cloneObj = (T) ois.readObject();</span><br><span class="line">            ois.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cloneObj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/12/23/Javaæ·±åº¦æ‹·è´-CloneUtils/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Spring-Cloud-Feign" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/12/23/Spring-Cloud-Feign/">Spring Cloud - Feign</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/12/23/Spring-Cloud-Feign/">
            <time datetime="2017-12-23T07:27:24.000Z" itemprop="datePublished">2017-12-23</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Cloud/">Spring Cloud</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Feign/">Feign</a>, <a class="tag-link" href="/tags/Ribbon/">Ribbon</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="Ribbon"><a href="#Ribbon" class="headerlink" title="Ribbon"></a>Ribbon</h2><p>Spring CLoud Ribbonæ˜¯åŸºäºHTTPå’ŒTCPçš„è´Ÿè½½å‡è¡¡å·¥å…·ï¼Œåœ¨å¾®æœåŠ¡å¼€å‘æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„Feignä¹Ÿæ˜¯ä½¿ç”¨çš„å®ƒã€‚å®ƒæ˜¯ä»¥Netflix Ribbonä¸ºåŸºç¡€å¼€å‘çš„ï¼Œ<br>Ribbonæ˜¯é€šè¿‡åœ¨å®¢æˆ·ç«¯é…ç½®ribbonServerListæ¥å®ç°è¯·æ±‚å’Œè´Ÿè½½å‡è¡¡çš„ã€‚å½“ä¸Spring Cloud Eurekaè”åˆä½¿ç”¨æ—¶ï¼ŒribbonServerListä¼šè¢«DiscoveryEnabledNIWSServerListé‡å†™ï¼Œå®ƒä¼šå°†è·å–æœåŠ¡ç«¯åˆ—è¡¨å’Œç¡®å®šæœåŠ¡ç«¯æ˜¯å¦å¯åŠ¨çš„èŒè´£äº¤ç»™eurekaã€‚</p>
<p>å‡†å¤‡å·¥ä½œï¼š<br>1ã€å¯åŠ¨Eureka Server<br>2ã€å¯åŠ¨ä¸¤ä¸ªprovider-userï¼ˆæœåŠ¡æä¾›è€…ï¼‰</p>
<p><img src="https://static.oschina.net/uploads/img/201712/23143251_4JNa.png" alt="image"></p>
<p>åœ¨æœåŠ¡æä¾›è€…ä¸­åªç®€å•äº†æä¾›äº†ä¸€ä¸ªåŠ æ³•åŠŸèƒ½ï¼š</p>
<p>provider 1ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/add"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addCompute</span><span class="params">(@RequestParam Integer a, @RequestParam Integer b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"æˆ‘æ˜¯ç¬¬ä¸€ä¸ªæœåŠ¡æä¾›è€…, ç­”æ¡ˆæ˜¯: "</span> + (a + b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>provider 2:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/add"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addCompute</span><span class="params">(@RequestParam Integer a, @RequestParam Integer b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"æˆ‘æ˜¯ç¬¬äºŒä¸ªæœåŠ¡æä¾›è€…, ç­”æ¡ˆæ˜¯: "</span> + (a + b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡"><a href="#ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡" class="headerlink" title="ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡"></a>ä½¿ç”¨Ribbonå®ç°è´Ÿè½½å‡è¡¡</h3><p>æ„å»ºä¸€ä¸ªSpring booté¡¹ç›®ï¼š<br>ç•¥<br>æ·»åŠ ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">version</span>&gt;</span>Brixton.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨é¡¹ç›®ä¸»ç±»ï¼Œæ·»åŠ @EnableDiscoveryClientæ¥å¯ç”¨æœåŠ¡å‘ç°èƒ½åŠ›ã€‚åˆ›å»ºRestTemplateçš„Beanï¼Œæ·»åŠ @LoadBalancedæ³¨è§£å¯ç”¨è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TODO</span></span><br><span class="line"><span class="comment"> * Created by jinzili on 09/06/2017.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerMovieApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConsumerMovieApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºConsumerControllerï¼Œç›´æ¥ä½¿ç”¨RestTemplateè°ƒç”¨providerï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/add"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeAdd</span><span class="params">()</span></span>&#123;</span><br><span class="line">    String addResult = <span class="keyword">this</span>.restTemplate.getForObject(<span class="string">"http://MIRCROSERVICE-PROVIDER-USER/add?a=2&amp;b=3"</span>, String.class);</span><br><span class="line">    System.out.println(addResult);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>application.ymlé…ç½®eurekaæ³¨å†Œä¸­å¿ƒï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8010</span></span><br><span class="line"><span class="attr">debug:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  application:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">microservice-consumer</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line"><span class="attr">  instance:</span></span><br><span class="line"><span class="attr">    prefer-ip-address:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  client:</span></span><br><span class="line"><span class="attr">    service-url:</span></span><br><span class="line">      <span class="comment"># defaultZone: http://peer1:peer1@peer1:8761/eureka/, http://peer2:peer2@peer2:8762/eureka/</span></span><br><span class="line"><span class="attr">      defaultZone:</span> <span class="attr">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure>
<p>è®¿é—®ä¸¤æ¬¡<a href="http://localhost:8010/addï¼ŒæŸ¥çœ‹æ—¥å¿—" target="_blank" rel="noopener">http://localhost:8010/addï¼ŒæŸ¥çœ‹æ—¥å¿—</a><br><img src="https://static.oschina.net/uploads/img/201712/23150019_gmKR.png" alt="image"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªprovideråˆ†åˆ«è¢«è°ƒç”¨äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥é€šè¿‡è¿™äº›ç®€å•çš„é…ç½®å’Œä»£ç å·²ç»æä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯è´Ÿè´£å‡è¡¡çš„spring booté¡¹ç›®ã€‚</p>
<p>ä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ä¸€èˆ¬ä¸ä¼šç›´æ¥ä½¿ç”¨Ribbonï¼Œå› ä¸ºæˆ‘ä»¬å°†URLç¡¬ç¼–ç åˆ°äº†Controlleré‡Œï¼Œè€Œä¸”å¯èƒ½æ•£è½åœ¨é¡¹ç›®çš„å„ä¸ªåœ°æ–¹ï¼Œè¿™ç§æ–¹å¼å®åœ¨ä¸æ€ä¹ˆä¼˜é›…ã€‚æ‰€ä»¥åœ¨å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬éƒ½ä½¿ç”¨å£°æ˜å¼çš„å®¢æˆ·ç«¯â€“Feignã€‚</p>
<h2 id="Feign"><a href="#Feign" class="headerlink" title="Feign"></a>Feign</h2><p>Feignåœ¨RestTemplateçš„åŸºç¡€ä¸Šå¯¹å…¶è¿›è¡Œå°è£…ï¼Œå¹¶ä¸”Spring Cloudä¸ºFeignå¢åŠ äº†å¯¹Spring MVCæ³¨è§£çš„æ”¯æŒï¼Œæ•´åˆäº†Ribbonå’ŒEurekaæ¥å®ç°è´Ÿè½½å‡è¡¡çš„ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªspring boot é¡¹ç›®ï¼š<br>ç•¥</p>
<p>æ·»åŠ ä¾èµ–ï¼š<br>åœ¨ä¸Šæ–‡çš„ä¾èµ–ä¸­åªéœ€åœ¨æ·»åŠ ä¸Šå¯¹Feignçš„ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-feign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨é¡¹ç›®ä¸»ç±»ä¸ŠåŠ ä¸Š@EnableFeignClientså¼€å¯Feign ClientåŠŸèƒ½ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TODO</span></span><br><span class="line"><span class="comment"> * Created by jinzili on 09/06/2017.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerMovieFeignApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConsumerMovieFeignApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºFeign Clientï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TODO</span></span><br><span class="line"><span class="comment"> * Created by jinzili on 10/06/2017.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient</span>(name = <span class="string">"microservice-provider-user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserFeignClient</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/add"</span>)</span><br><span class="line">    <span class="function">String <span class="title">add</span><span class="params">(@RequestParam(<span class="string">"a"</span>)</span> Integer a, @<span class="title">RequestParam</span><span class="params">(<span class="string">"b"</span>)</span> Integer b)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºcontrollerï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TODO</span></span><br><span class="line"><span class="comment"> * Created by jinzili on 09/06/2017.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovieController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserFeignClient userFeignClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/add"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String result = <span class="keyword">this</span>.userFeignClient.add(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¿é—®ä¸¤æ¬¡<a href="http://localhost:8011/addï¼ŒæŸ¥çœ‹æ—¥å¿—" target="_blank" rel="noopener">http://localhost:8011/addï¼ŒæŸ¥çœ‹æ—¥å¿—</a><br><img src="https://static.oschina.net/uploads/img/201712/23151739_LRSR.png" alt="image"></p>
<p>æˆ‘ä»¬å‘ç°å¾—åˆ°äº†ä¸ä½¿ç”¨RestTemplateåŒæ ·çš„æ•ˆæœï¼Œä½†æ˜¯å¤§å¤§æé«˜äº†ä»£ç çš„ä¼˜é›…æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨providerï¼Œå¹¶ä¸”åŒä¸€æ¨¡å—çš„providerèšåˆåˆ°äº†ä¸€èµ·ã€‚</p>
<p>æœ‰éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š</p>
<ul>
<li>æˆ‘ä»¬åœ¨Feign Clientä¸­ä½¿ç”¨@RequestParam @PathVariable æ³¨è§£æ—¶å¿…é¡»è¦è¦æŒ‡å®šå…¶valueï¼Œæ¯”å¦‚@RequestParam(â€œuserNameâ€)ï¼Œ@PathVariable(â€œidâ€)ï¼Œè¿™æ˜¯å› ä¸ºFeignåœ¨å¤„ç†è¿™äº›æ³¨è§£æ—¶å’ŒSpring MVCä¸ä¸€æ ·ï¼ŒFeignä¸ä¼šé€šè¿‡åå°„è·å–é»˜è®¤çš„keyå€¼ã€‚</li>
<li>å½“ä½¿ç”¨GETæ–¹æ³•å’Œ@RequestBodyæ³¨è§£å…±åŒå­˜åœ¨æ—¶ï¼ŒFeignä¼šå°†è¯·æ±‚è‡ªåŠ¨è½¬æˆPOSTæ–¹æ³•ï¼Œè¿™ä¸€ç‚¹ä¹Ÿæ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹ã€‚</li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/12/23/Spring-Cloud-Feign/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-quartzçš„misfireç­–ç•¥" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/11/30/quartzçš„misfireç­–ç•¥/">quartzçš„misfireç­–ç•¥</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/11/30/quartzçš„misfireç­–ç•¥/">
            <time datetime="2017-11-30T06:01:52.000Z" itemprop="datePublished">2017-11-30</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Java-Framework/">Java Framework</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/quartz/">quartz</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>quartzæ¡†æ¶ä¸­æä¾›äº†ä¸€ç³»åˆ—misfireç­–ç•¥ï¼Œæ˜¯æŒ‡ä»»åŠ¡å› ä¸ºæŸç§åŸå› é”™è¿‡äº†æ‰§è¡Œï¼Œå¯ä»¥æ ¹æ®ä¸åŒä»»åŠ¡éœ€æ±‚å®šåˆ¶ä¸åŒçš„ç­–ç•¥ã€‚</p>
<h2 id="without-repeating-ä¸é‡å¤çš„ä»»åŠ¡"><a href="#without-repeating-ä¸é‡å¤çš„ä»»åŠ¡" class="headerlink" title="without repeating (ä¸é‡å¤çš„ä»»åŠ¡)"></a>without repeating (ä¸é‡å¤çš„ä»»åŠ¡)</h2><p>è¿™æ˜¯ä¸€ä¸ªåœ¨2017-11-30 11:25:00æ‰§è¡Œçš„ä»»åŠ¡ï¼Œè·ç¦»æˆ‘å†™æ­¤ç¯‡æ–‡ç« çš„æ—¶å€™å·²ç»è¿‡å»äº†ååˆ†é’Ÿå·¦å³ï¼Œæ‰€ä»¥ä¸€å®šä¼šå‡ºå‘misfireç­–ç•¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SimpleTrigger simpleTrigger = TriggerBuilder.newTrigger()</span><br><span class="line">    .withIdentity(<span class="string">"helloworld-trigger-name-1"</span>, <span class="string">"helloworld-trigger-group-1"</span>)</span><br><span class="line">    .withSchedule(SimpleScheduleBuilder.simpleSchedule())</span><br><span class="line">    .startAt(<span class="keyword">new</span> Date(<span class="number">1512012300000L</span>))</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure>
<p><strong>withMisfireHandlingInstructionFireNow</strong></p>
<p>é”™è¿‡ä¹‹åé©¬ä¸Šæ‰§è¡Œ</p>
<p><strong>withMisfireHandlingInstructionNextWithRemainingCount</strong></p>
<p>é”™è¿‡ä¹‹åå¿½ç•¥</p>
<h2 id="repeating-fixed-number-of-times-å¤šæ¬¡æ‰§è¡Œ"><a href="#repeating-fixed-number-of-times-å¤šæ¬¡æ‰§è¡Œ" class="headerlink" title="repeating fixed number of times (å¤šæ¬¡æ‰§è¡Œ)"></a>repeating fixed number of times (å¤šæ¬¡æ‰§è¡Œ)</h2><p>è¿™æ˜¯ä¸€ä¸ªåœ¨2017-11-30 12:00:00æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå…±æ‰§è¡Œ5æ¬¡ï¼Œæ¯æ¬¡é—´éš”1ä¸ªå°æ—¶çš„ä»»åŠ¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SimpleTrigger simpleTrigger = TriggerBuilder.newTrigger()</span><br><span class="line">    .withIdentity(<span class="string">"helloworld-trigger-name-1"</span>, <span class="string">"helloworld-trigger-group-1"</span>)</span><br><span class="line">    .withSchedule(SimpleScheduleBuilder.simpleSchedule()</span><br><span class="line">            .withRepeatCount(<span class="number">5</span>)</span><br><span class="line">            .withIntervalInHours(<span class="number">1</span>))</span><br><span class="line">    .startAt(<span class="number">1512014400000L</span>)</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure></p>
<p><strong>withMisfireHandlingInstructionFireNow</strong></p>
<p>é”™è¿‡ä¹‹åï¼Œæ¢å¤æ­£å¸¸æ—¶é©¬ä¸Šæ‰§è¡Œï¼Œæ€»æ¬¡æ•°è¿˜æ˜¯5æ¬¡ï¼Œå‡å¦‚åœ¨12:15:00åˆ†æ—¶æ‰§è¡Œäº†misfireï¼Œåˆ™ä»¥åæ¯æ¬¡æ‰§è¡Œéƒ½ä¼šåœ¨15åˆ†æ—¶æ‰§è¡Œï¼Œä¼šæ‰§è¡Œåˆ°16:15:00ã€‚</p>
<p><strong>withMisfireHandlingInstructionNowWithExistingCount</strong></p>
<p>å¦‚æœ13:00:00é”™è¿‡æ‰§è¡Œï¼Œ13:15:00æ¢å¤æ‰§è¡Œï¼Œåˆ™å°†æ¸…ç©ºå·²æ‰§è¡Œæ¬¡æ•°ï¼Œæ€»çš„æ‰§è¡Œæ¬¡æ•°ä¸º6ï¼Œä¼šæ‰§è¡Œåˆ°17:15:00ã€‚</p>
<p><strong>withMisfireHandlingInstructionNextWithRemainingCount</strong></p>
<p>é”™è¿‡ä¹‹åå¿½ç•¥ï¼Œdo nothingï¼Œ æ€»æ¬¡æ•°è¿˜æ˜¯5æ¬¡</p>
<h2 id="reapting-forever-é‡å¤æ‰§è¡Œ"><a href="#reapting-forever-é‡å¤æ‰§è¡Œ" class="headerlink" title="reapting forever (é‡å¤æ‰§è¡Œ)"></a>reapting forever (é‡å¤æ‰§è¡Œ)</h2><p>ä¼šåœ¨2017-11-30 12:00:00å¼€å§‹ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œå¹¶æ¯éš”1ä¸ªå°æ—¶é‡å¤æ‰§è¡Œä¸‹å»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SimpleTrigger simpleTrigger = TriggerBuilder.newTrigger()</span><br><span class="line">    .withIdentity(<span class="string">"helloworld-trigger-name-1"</span>, <span class="string">"helloworld-trigger-group-1"</span>)</span><br><span class="line">    .withSchedule(SimpleScheduleBuilder.simpleSchedule()</span><br><span class="line">            .repeatForever()</span><br><span class="line">            .withIntervalInHours(<span class="number">1</span>))</span><br><span class="line">    .startAt(<span class="number">1512014400000L</span>)</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure>
<p><strong>withMisfireHandlingInstructionFireNow</strong></p>
<p>æ¯æ¬¡é”™è¿‡åï¼Œåœ¨ä¸‹ä¸€ä¸ªå¤±æ•ˆèŠ‚ç‚¹æ‰§è¡Œ</p>
<p><strong>withMisfireHandlingInstructionNextWithRemainingCount</strong></p>
<p>æ¯æ¬¡é”™è¿‡åï¼Œåœ¨ä¸‹ä¸ªå®šä¹‰çš„æ—¶é—´ç‚¹æ‰§è¡Œ</p>
<h2 id="Cron-triggers-cronè¡¨è¾¾å¼æ‰§è¡Œ"><a href="#Cron-triggers-cronè¡¨è¾¾å¼æ‰§è¡Œ" class="headerlink" title="Cron triggers (cronè¡¨è¾¾å¼æ‰§è¡Œ)"></a>Cron triggers (cronè¡¨è¾¾å¼æ‰§è¡Œ)</h2><p>è¿™æ˜¯ä¸€ä¸ªä¼šåœ¨æ¯å¤©ä¸‹åˆä¸¤ç‚¹åˆ°äº”ç‚¹æ¯éš”ä¸€å°æ—¶æ‰§è¡Œçš„ä»»åŠ¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CronTrigger cronTrigger = TriggerBuilder.newTrigger()</span><br><span class="line">    .withIdentity(<span class="string">"helloworld-trigger-name-"</span> + i, <span class="string">"helloworld-trigger-group-1"</span>)</span><br><span class="line">    .withSchedule(CronScheduleBuilder.cronSchedule(<span class="string">"00 00 14-17 * * ?"</span>))</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure></p>
<p><strong>withMisfireHandlingInstructionIgnoreMisfires</strong></p>
<p>æ‰€æœ‰é”™è¿‡çš„ä»»åŠ¡é©¬ä¸Šæ‰§è¡Œ</p>
<p><strong>withMisfireHandlingInstructionDoNothing</strong></p>
<p>æ‰€æœ‰é”™è¿‡çš„ä»»åŠ¡å¿½ç•¥</p>
<p><strong>withMisfireHandlingInstructionFireAndProceed</strong></p>
<p>åˆå¹¶é”™è¿‡çš„ä»»åŠ¡ï¼Œå¦‚14ç‚¹å’Œ15ç‚¹çš„ä»»åŠ¡é”™è¿‡ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡misfireï¼Œä¸‹æ¬¡æ•´ç‚¹ç»§ç»­æ‰§è¡Œã€‚</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/11/30/quartzçš„misfireç­–ç•¥/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Kubernetes-ä¸“æ²»ç–‘éš¾æ‚ç—‡" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/11/27/Kubernetes-ä¸“æ²»ç–‘éš¾æ‚ç—‡/">Kubernetes - ä¸“æ²»ç–‘éš¾æ‚ç—‡</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/11/27/Kubernetes-ä¸“æ²»ç–‘éš¾æ‚ç—‡/">
            <time datetime="2017-11-27T08:14:26.000Z" itemprop="datePublished">2017-11-27</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/DevOps/">DevOps</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/kubernetes/">kubernetes</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <ul>
<li>ä½¿ç”¨kubectl logs å‡ºç° failed to create fsnotify watcher: too many open files<br>è¿™æ˜¯å› ä¸ºç³»ç»Ÿé»˜è®¤çš„fs.inotify.max_user_instances=128å¤ªå°ï¼Œé‡æ–°è®¾ç½®æ­¤å€¼ï¼š</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl fs.inotify.max_user_instances=8192</span><br></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/11/27/Kubernetes-ä¸“æ²»ç–‘éš¾æ‚ç—‡/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Java-synchronized" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/11/25/Java-synchronized/">Java - synchronized</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/11/25/Java-synchronized/">
            <time datetime="2017-11-25T08:34:07.000Z" itemprop="datePublished">2017-11-25</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/æŠ€æœ¯æ‚è°ˆ/">æŠ€æœ¯æ‚è°ˆ</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/synchronized/">synchronized</a>, <a class="tag-link" href="/tags/é”/">é”</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨synchronizedæ—¶ï¼Œé€šå¸¸æœ‰ä¸‹é¢å‡ ç§æ–¹å¼ï¼š</p>
<h3 id="synchronized-this"><a href="#synchronized-this" class="headerlink" title="synchronized(this){}"></a>synchronized(this){}</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">RunnableThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="keyword">this</span>)&#123;</span><br><span class="line">                System.out.println(<span class="keyword">this</span>);</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++)&#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">synchronizedThisTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        RunnableThread r1 = <span class="keyword">new</span> RunnableThread();</span><br><span class="line"><span class="comment">//        RunnableThread r2 = new RunnableThread();</span></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(r1, <span class="string">"t1"</span>);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(r1, <span class="string">"t2"</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">com.jzl.javabase.SynchronizedTest$RunnableThread@4c5986b6</span><br><span class="line">t1:0</span><br><span class="line">...</span><br><span class="line">com.jzl.javabase.SynchronizedTest$RunnableThread@4c5986b6</span><br><span class="line">t2:0</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><strong>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°syschronized(this)ä¸­thisæŒ‡çš„æ˜¯åŒä¸€å¯¹è±¡, è¿™æ®µä»£ç å—åŒä¸€æ—¶åˆ»åªèƒ½æœ‰åŒä¸€çº¿ç¨‹è¿è¡Œã€‚</strong> </p>
<p>å†æ¥çœ‹è¿™ç§å½¢å¼:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RunnableThread r1 = <span class="keyword">new</span> RunnableThread();</span><br><span class="line">RunnableThread r2 = <span class="keyword">new</span> RunnableThread();</span><br><span class="line">Thread t1 = <span class="keyword">new</span> Thread(r1, <span class="string">"t1"</span>);</span><br><span class="line">Thread t2 = <span class="keyword">new</span> Thread(r2, <span class="string">"t2"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">com.jzl.javabase.SynchronizedTest$RunnableThread@4c5986b6</span><br><span class="line">com.jzl.javabase.SynchronizedTest$RunnableThread@22419e86</span><br><span class="line">t2:0</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><strong>æ­¤æ—¶thisæŒ‡çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡, æ‰€ä»¥è¿™ç§æƒ…å†µsyschronizedä»£ç å—å¹¶ä¸èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰åŒä¸€çº¿ç¨‹è¿è¡Œ</strong>ã€‚</p>
<p>å†æ¥çœ‹çœ‹è¿™ç§æƒ…å†µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CommonClass</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lockMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="keyword">this</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + i);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notLockMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + i);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        CommonClass cc = <span class="keyword">new</span> CommonClass();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;cc.lockMethod();&#125;, <span class="string">"t1"</span>);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(() -&gt; &#123;cc.notLockMethod();&#125;, <span class="string">"t2"</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">t1:0</span><br><span class="line">t2:0</span><br><span class="line">t2:1</span><br><span class="line">t1:1</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>å¾ˆæ˜¾ç„¶ï¼Œ<strong>å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¿™ä¸ªå¯¹è±¡çš„synchronized(this)æ–¹æ³•æ—¶, å…¶ä»–çº¿ç¨‹ä»ç„¶å¯ä»¥è®¿é—®è¿™ä¸ªå¯¹è±¡çš„ésynchronized(this)æ–¹æ³•ã€‚</strong></p>
<h3 id="public-synchronized-void-lockMethod"><a href="#public-synchronized-void-lockMethod" class="headerlink" title="public synchronized void lockMethod()"></a>public synchronized void lockMethod()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LockClass</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">lockMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i ++)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + i);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lockClassTest</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        LockClass l1 = <span class="keyword">new</span> LockClass();</span><br><span class="line"><span class="comment">//        LockClass l2 = new LockClass();</span></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;l1.lockMethod();&#125;, <span class="string">"t1"</span>);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(() -&gt; &#123;l1.lockMethod();&#125;, <span class="string">"t2"</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lockClassTest</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        LockClass l1 = <span class="keyword">new</span> LockClass();        LockClass l2 = <span class="keyword">new</span> LockClass();</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;l1.lockMethod();&#125;, <span class="string">"t1"</span>);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(() -&gt; &#123;l2.lockMethod();&#125;, <span class="string">"t2"</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å¯¹æ¯”è¿è¡Œç»“æœå‘ç°, è¿™ç§æ–¹å¼ä¸synchronized(this)æ–¹å¼ç›¸åŒã€‚ç¬¬äºŒç§è™½ç„¶æ–¹æ³•æ˜¯åŒæ­¥çš„, ä½†æ˜¯é”ä½çš„å´ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡, æ‰€ä»¥ä¸èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œæ­¤ä»£ç å—ã€‚<br>å¦‚æœè¦æ±‚ä¸åŒå¯¹è±¡é—´ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡ŒæŸä¸ªæ–¹æ³•, æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°ï¼š</p>
<ul>
<li>synchronized(Object.class){// åŒæ­¥ä»£ç å—}</li>
<li>public synchronized static void lockMethod(){// åŒæ­¥ä»£ç å—}</li>
<li>public void lockMethod2(SomeObject so){synchronized(so){// åŒæ­¥ä»£ç å—}}</li>
</ul>
<p>å¯¹äºç¬¬ä¸€ç§æ–¹æ³•, é€šå¸¸å®šä¸€ä¸ªé™æ€byteæ•°ç»„å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] mutex = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>];</span><br><span class="line">...</span><br><span class="line">synchronzied(mutex)&#123;<span class="comment">// åŒæ­¥ä»£ç å—&#125;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">// æˆ–è€…æ˜¯</span></span><br><span class="line">synchronzied(SomeObject.class)&#123;<span class="comment">// åŒæ­¥ä»£ç å—&#125;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šä½¿ç”¨byteæ•°ç»„åˆ›å»ºèµ·æ¥æ¯”å…¶ä»–å¯¹è±¡æ›´åŠ ç»æµâ€“ç”Ÿæˆé›¶é•¿åº¦çš„byteæ•°ç»„åªéœ€è¦ä¸‰è¡Œæ“ä½œç ï¼Œè€Œnew Object()éœ€è¦7è¡Œã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åœ¨ä½¿ç”¨synchronizedé”æ—¶ï¼Œæˆ‘ä»¬è¦æ³¨æ„é”ä½çš„å¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œç„¶ååœ¨å‡è®¾åŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥ä»£ç å—å¯èƒ½ä¼šå‘ç”Ÿçš„æƒ…å†µã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½è®¾è®¡æ›´å®‰å…¨çš„å¤šçº¿ç¨‹ç¨‹åºã€‚</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/11/25/Java-synchronized/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-è½¯ä»¶å¼€å‘å¿ƒå¾—è®°å½•" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/11/21/è½¯ä»¶å¼€å‘å¿ƒå¾—è®°å½•/">è½¯ä»¶å¼€å‘å¿ƒå¾—è®°å½•</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/11/21/è½¯ä»¶å¼€å‘å¿ƒå¾—è®°å½•/">
            <time datetime="2017-11-21T03:22:31.000Z" itemprop="datePublished">2017-11-21</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/å¼€å‘å¿ƒå¾—/">å¼€å‘å¿ƒå¾—</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/å¼€å‘å¿ƒå¾—/">å¼€å‘å¿ƒå¾—</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <ul>
<li><strong>çº¿ä¸Šfix bugæ—¶ï¼Œä¸è¦ç«‹å³å‘å¸ƒï¼Œåœ¨æ€¥çš„bugåœ¨å‘å¸ƒå‰ä¹Ÿä¸€å®šè¦ç»è¿‡å›å½’æµ‹è¯•ï¼Œå¦åˆ™å¾ˆæœ‰å¯èƒ½è§£å†³ä¸€ä¸ªbugå¯¼è‡´äº†å¦å¤–ä¸€ä¸ªbug</strong><br>Add 2017-11-21 11:20:23</li>
<li><strong>åœ¨ä»£ç ä¸­ä¸è¦ç›¸ä¿¡æ¥è‡ªå¤–éƒ¨çš„æ•°æ®, å…³é”®æ•°æ®ä¸€å®šè¦check</strong><br>Add 2017-11-22 20:19:30</li>
<li><strong>è®¾è®¡è¡¨çš„æ—¶å€™æ¯ä¸€ä¸ªå®ä½“è¡¨éƒ½è¦åŠ ä¸ŠCREATE_DATEå’ŒUPDATE_DATE</strong><br>Add 2017-11-28 19:13:42</li>
<li><strong>æ•°æ®åº“é‡Œçš„æ•°æ®å°½é‡ä¿æŒå®Œæ•´ï¼Œä»»ä½•æ•°æ®ä¸è¦ä¸¢æ‰</strong><br>Add 2017-12-04 16:13:46</li>
<li><strong>åœ¨é¢‘ç¹æ“ä½œæ•°æ®åº“æ—¶ï¼Œç”¨åªæœ‰SELECTæƒé™çš„è´¦æˆ·</strong><br>ADD 2017-12-29 19:56:56</li>
<li><strong>å¯¹ä»£ç è¦æœ‰è´£ä»»æ„Ÿï¼Œä¹ƒè‡³æœ‰å¼ºè¿«ç—‡</strong><br>ADD 2018-01-04 17:27:58</li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/11/21/è½¯ä»¶å¼€å‘å¿ƒå¾—è®°å½•/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Spring-Cloud-Eureka" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/10/25/Spring-Cloud-Eureka/">Spring Cloud - Eureka</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/10/25/Spring-Cloud-Eureka/">
            <time datetime="2017-10-25T10:31:10.000Z" itemprop="datePublished">2017-10-25</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Cloud/">Spring Cloud</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Eureka/">Eureka</a>, <a class="tag-link" href="/tags/SpringCloud/">SpringCloud</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a>Eureka</h1><p>åœ¨Spring Cloudä½“ç³»ä¸­ï¼Œeurekaæ‰¿æ‹…ç€æœåŠ¡æ³¨å†Œä¸å‘ç°çš„ä»»åŠ¡ï¼Œåœ¨æ•´ä¸ªå¾®æœåŠ¡æ¶æ„ä¸­èµ·ç€æ•´åˆä½œç”¨ã€‚eurekaçš„ä¸€äº›æ¦‚å¿µï¼š</p>
<h2 id="æœåŠ¡æä¾›è€…"><a href="#æœåŠ¡æä¾›è€…" class="headerlink" title="æœåŠ¡æä¾›è€…"></a>æœåŠ¡æä¾›è€…</h2><p>providerï¼ŒæŒ‡ä¸€ä¸ªå°†è‡ªèº«çš„åŠŸèƒ½æ¥å£æš´éœ²å‡ºæ¥çš„åº”ç”¨ã€‚</p>
<h2 id="æœåŠ¡æ¶ˆè´¹è€…"><a href="#æœåŠ¡æ¶ˆè´¹è€…" class="headerlink" title="æœåŠ¡æ¶ˆè´¹è€…"></a>æœåŠ¡æ¶ˆè´¹è€…</h2><p>consumerï¼ŒæŒ‡éœ€è¦å€ŸåŠ©provideræä¾›çš„åŠŸèƒ½å®Œæˆè‡ªèº«ä¸šåŠ¡çš„åº”ç”¨ã€‚</p>
<h2 id="æœåŠ¡æ³¨å†Œ"><a href="#æœåŠ¡æ³¨å†Œ" class="headerlink" title="æœåŠ¡æ³¨å†Œ"></a>æœåŠ¡æ³¨å†Œ</h2><p>å½“provideråº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šå°†è‡ªèº«çš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚IPåœ°å€ï¼Œç«¯å£ï¼Œåº”ç”¨åç­‰æ³¨å†Œåˆ°eureka serverä¸­ã€‚</p>
<h2 id="æœåŠ¡ç»­çº¦"><a href="#æœåŠ¡ç»­çº¦" class="headerlink" title="æœåŠ¡ç»­çº¦"></a>æœåŠ¡ç»­çº¦</h2><p>provideræ¯æå›ºå®šçš„æ—¶é—´æ®µ(é»˜è®¤30ç§’)ï¼Œå‘eureka serveræ±‡æŠ¥ä¸€æ¬¡è‡ªèº«çŠ¶å†µï¼Œå¦‚æœeureka serveråœ¨å›ºå®šçš„æ—¶é—´æ®µ(é»˜è®¤90ç§’)å†…æ²¡æœ‰æ”¶åˆ°æŸä¸€providerçš„æœåŠ¡ç»­çº¦çš„è¯·æ±‚ï¼Œå°†ä¼šæŠŠè¿™ä¸ªproviderå®ä¾‹ä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤ã€‚</p>
<h2 id="è·å–æ³¨å†Œä¿¡æ¯"><a href="#è·å–æ³¨å†Œä¿¡æ¯" class="headerlink" title="è·å–æ³¨å†Œä¿¡æ¯"></a>è·å–æ³¨å†Œä¿¡æ¯</h2><p>consumeråº”ç”¨ä¼šå®šæ—¶ä»eureka serverè·å–æœåŠ¡æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ä»¥ä¾›è‡ªèº«è¿›è¡Œè¿œç¨‹è°ƒç”¨ï¼Œconsumeråº”ç”¨é»˜è®¤æ¯30ç§’ä¼šæ›´æ–°ä¸€æ¬¡æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ï¼Œé»˜è®¤eureka serverå’Œconsumeråº”ç”¨ä½¿ç”¨å‹ç¼©çš„jsonè¿›è¡Œäº¤äº’ã€‚</p>
<h2 id="æœåŠ¡ä¸‹çº¿"><a href="#æœåŠ¡ä¸‹çº¿" class="headerlink" title="æœåŠ¡ä¸‹çº¿"></a>æœåŠ¡ä¸‹çº¿</h2><p>provideråº”ç”¨å…³é—­æ—¶ï¼Œä¼šå‘eureka serverå‘é€ä¸‹çº¿è¯·æ±‚ï¼Œeureka serveræ”¶åˆ°è¯·æ±‚åä¼šå°†æ­¤providerå®ä¾‹ä¿¡æ¯ä»æœåŠ¡æ³¨å†Œåˆ—è¡¨ä¸­å‰”é™¤ã€‚</p>
<h1 id="Eureka-Server"><a href="#Eureka-Server" class="headerlink" title="Eureka Server"></a>Eureka Server</h1><h2 id="æ·»åŠ eureka-serverä¾èµ–"><a href="#æ·»åŠ eureka-serverä¾èµ–" class="headerlink" title="æ·»åŠ eureka serverä¾èµ–"></a>æ·»åŠ eureka serverä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="application-yml-é…ç½®"><a href="#application-yml-é…ç½®" class="headerlink" title="application.yml é…ç½®"></a>application.yml é…ç½®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">Â  port: 8761 # æœåŠ¡ç«¯å£</span><br><span class="line"></span><br><span class="line">spring:</span><br><span class="line">Â  application:</span><br><span class="line">Â  Â  name: eurekaServer # æœåŠ¡å</span><br><span class="line">eureka:</span><br><span class="line">Â  environment: devlopment # eureka serverç¯å¢ƒ</span><br><span class="line">Â  instance:</span><br><span class="line">Â  Â  lease-renewal-interval-in-seconds: 10 # å‘é€å¿ƒè·³çš„é—´éš”æ—¶é—´</span><br><span class="line">Â  Â  lease-expiration-duration-in-seconds: 30 # è‹¥è¿™ä¸ªæ—¶é—´æ®µæ²¡æ”¶åˆ°å¿ƒè·³åˆ™ç§»é™¤è¯¥instance</span><br><span class="line">Â  Â  prefer-ip-address: true # å®ä¾‹åç§°æ˜¾ç¤ºIPé…ç½®</span><br><span class="line"></span><br><span class="line">Â  client:</span><br><span class="line">Â  Â  serviceUrl:</span><br><span class="line">Â  Â  Â  defaultZone: http://localhost:8761/eureka/ # eureka serverçš„åœ°å€</span><br><span class="line">Â  Â  register-with-eureka: true # æ­¤æœåŠ¡æ˜¯å¦æ³¨å†Œåˆ°eureka serverä¸Š</span><br><span class="line">Â  server:</span><br><span class="line">Â  Â  enable-self-preservation: false # å…³é—­è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼</span><br><span class="line">Â  Â  eviction-interval-timer-in-ms: 4000 # æ‰«æå¤±æ•ˆæœåŠ¡é—´éš”(å•ä½ms, é»˜è®¤æ˜¯60 * 1000)</span><br><span class="line">Â  Â  wait-time-in-ms-when-sync-empty: 0</span><br><span class="line"></span><br><span class="line">debug: true # debug æ¨¡å¼</span><br></pre></td></tr></table></figure>
<h2 id="åŠ å…¥-EnableEurekaServeræ³¨è§£"><a href="#åŠ å…¥-EnableEurekaServeræ³¨è§£" class="headerlink" title="åŠ å…¥@EnableEurekaServeræ³¨è§£"></a>åŠ å…¥@EnableEurekaServeræ³¨è§£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaApplication</span> </span>&#123;</span><br><span class="line">Â  Â  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Â  Â  Â  Â  SpringApplication.run(EurekaApplication.class, args);</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªéœ€è¿™ç®€å•çš„é…ç½®ï¼Œå°±å·²ç»æ­å»ºäº†ä¸€å°eureka serveråº”ç”¨ã€‚</p>
<h1 id="Eureka-Client"><a href="#Eureka-Client" class="headerlink" title="Eureka Client"></a>Eureka Client</h1><h2 id="æ·»åŠ eurekaä¾èµ–"><a href="#æ·»åŠ eurekaä¾èµ–" class="headerlink" title="æ·»åŠ eurekaä¾èµ–"></a>æ·»åŠ eurekaä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">Â  Â  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="application-yml-é…ç½®-1"><a href="#application-yml-é…ç½®-1" class="headerlink" title="application.yml é…ç½®"></a>application.yml é…ç½®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">Â  port: 8080</span><br><span class="line">debug: true</span><br><span class="line">eureka:</span><br><span class="line">Â  client:</span><br><span class="line">Â  Â  service-url:</span><br><span class="line">Â  Â  Â  defaultZone: http://localhost:8761/eureka/</span><br><span class="line">Â  instance:</span><br><span class="line">Â  Â  prefer-ip-address: true Â  #å°†è‡ªå·±çš„IPæ³¨å†Œåˆ°eureka serverä¸Š,å¦‚ä¸é…ç½®åˆ™è¡¨ç¤ºæ³¨å†Œå¾®æœåŠ¡æ‰€åœ¨æ“ä½œç³»ç»Ÿçš„hostnameåˆ°eureka server</span><br></pre></td></tr></table></figure>
<h2 id="åŠ å…¥-EnableDiscoveryClientæ³¨è§£"><a href="#åŠ å…¥-EnableDiscoveryClientæ³¨è§£" class="headerlink" title="åŠ å…¥@EnableDiscoveryClientæ³¨è§£"></a>åŠ å…¥@EnableDiscoveryClientæ³¨è§£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Â * TODO</span></span><br><span class="line"><span class="comment">Â * Created by jinzili on 09/06/2017.</span></span><br><span class="line"><span class="comment">Â */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProviderUserApplication</span> </span>&#123;</span><br><span class="line">Â  Â  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Â  Â  Â  Â  SpringApplication.run(ProviderUserApplication.class, args);</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æ­å»ºå¥½äº†ä¸€å°Eureka Server å’Œä¸€å°providerï¼Œè®¿é—®<a href="http://localhost:8761çœ‹çœ‹æ•ˆæœï¼" target="_blank" rel="noopener">http://localhost:8761çœ‹çœ‹æ•ˆæœï¼</a><br><img src="https://static.oschina.net/uploads/space/2017/1025/182114_6w0z_3559870.png" alt="image"></p>
<p>perfect!</p>
<p>æˆ‘ä»¬çš„ä¸¤ä¸ªæœåŠ¡å·²ç»æ³¨å†Œåˆ°äº†Eureka Serverä¸Šï¼Œä¸Šå›¾çš„çº¢å­—æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨Eureka ServeræœåŠ¡çš„application.ymlé…ç½®äº†eureka.server.enable-self-preservation: false å…³é—­äº†è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼Œæ¨èåœ¨å¼€å‘ä¸­æˆ‘ä»¬ä½¿ç”¨æ­¤é…ç½®ï¼Œå¯ä»¥åŠæ—¶åˆ·æ–°æœåŠ¡çš„æœ€æ–°çŠ¶æ€ï¼Œä½†æ˜¯åˆ‡è®°åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¦å¼€å¯è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/10/25/Spring-Cloud-Eureka/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-2017-10-19-è·¯ç¯ä¸‹æœ‰æ„Ÿ" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/10/21/2017-10-19-è·¯ç¯ä¸‹æœ‰æ„Ÿ/">2017-10-19:è·¯ç¯ä¸‹æœ‰æ„Ÿ</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/10/21/2017-10-19-è·¯ç¯ä¸‹æœ‰æ„Ÿ/">
            <time datetime="2017-10-21T01:20:47.000Z" itemprop="datePublished">2017-10-21</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/éšç¬”/">éšç¬”</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/å¿ƒæƒ…/">å¿ƒæƒ…</a>, <a class="tag-link" href="/tags/éšç¬”/">éšç¬”</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="æœˆä¸‹æ—§äººå½’ï¼Œ"><a href="#æœˆä¸‹æ—§äººå½’ï¼Œ" class="headerlink" title="æœˆä¸‹æ—§äººå½’ï¼Œ"></a><em>æœˆä¸‹æ—§äººå½’ï¼Œ</em></h4><h4 id="äººç”Ÿå‡ å¤šå›ã€‚"><a href="#äººç”Ÿå‡ å¤šå›ã€‚" class="headerlink" title="äººç”Ÿå‡ å¤šå›ã€‚"></a><em>äººç”Ÿå‡ å¤šå›ã€‚</em></h4><h4 id="æ‹¨å¼€äº‘é›¾é‡Œï¼Œ"><a href="#æ‹¨å¼€äº‘é›¾é‡Œï¼Œ" class="headerlink" title="æ‹¨å¼€äº‘é›¾é‡Œï¼Œ"></a><em>æ‹¨å¼€äº‘é›¾é‡Œï¼Œ</em></h4><h4 id="å¿ƒä¸­è‡ªæœ‰é†‰ã€‚"><a href="#å¿ƒä¸­è‡ªæœ‰é†‰ã€‚" class="headerlink" title="å¿ƒä¸­è‡ªæœ‰é†‰ã€‚"></a><em>å¿ƒä¸­è‡ªæœ‰é†‰ã€‚</em></h4><p><img src="https://static.oschina.net/uploads/space/2017/1021/092459_Co4p_3559870.jpeg" alt="image"></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/10/21/2017-10-19-è·¯ç¯ä¸‹æœ‰æ„Ÿ/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-quartzé›†ç¾¤é…ç½®" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/10/19/quartzé›†ç¾¤é…ç½®/">quartzé›†ç¾¤é…ç½®</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2017/10/19/quartzé›†ç¾¤é…ç½®/">
            <time datetime="2017-10-19T07:14:27.000Z" itemprop="datePublished">2017-10-19</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Java-Framework/">Java Framework</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/quartz/">quartz</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="JobStore"><a href="#JobStore" class="headerlink" title="JobStore"></a>JobStore</h1><p>åœ¨å¼€å§‹é…ç½®quartzé›†ç¾¤ä¹‹å‰ï¼Œå…ˆè¦äº†è§£ä¸€ä¸‹Schedulerçš„â€œå·¥ä½œæ•°æ®â€çš„å­˜æ”¾ç‚¹ï¼š</p>
<h2 id="RAMJobStore"><a href="#RAMJobStore" class="headerlink" title="RAMJobStore"></a>RAMJobStore</h2><p>RAMJobStoreæ˜¯æœ€ç®€å•æœ€é«˜æ•ˆï¼Œä¹Ÿæ˜¯quartzé»˜è®¤çš„å­˜å‚¨æ–¹å¼ï¼Œå®ƒå°†â€œå·¥ä½œæ•°æ®â€å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥å®ƒæ— éœ€ä»»ä½•é¢å¤–é…ç½®ï¼Œä¹Ÿæ˜¯æœ€é«˜æ•ˆçš„åŸå› ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼çš„å¼Šç«¯ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š</p>
<ul>
<li>ä»»åŠ¡é‡å—é™äºå†…å­˜å¤§å°</li>
<li>å½“ç³»ç»Ÿå´©æºƒæ—¶ï¼Œå°±ä¸¢æ‰äº†æ‰€æœ‰ä»»åŠ¡ä¿¡æ¯ï¼Œè¿™å¯¹äºä¸€äº›ç¨‹åºæ˜¯ç¾éš¾æ€§çš„</li>
<li>æ— æ³•é›†ç¾¤åŒ–</li>
</ul>
<h2 id="JDBCJobStore"><a href="#JDBCJobStore" class="headerlink" title="JDBCJobStore"></a>JDBCJobStore</h2><p>çœ‹åˆ°JDBCæˆ‘ä»¬å°±åº”è¯¥å·²ç»çŸ¥é“äº†ï¼Œè¿™ç§æ–¹å¼æ˜¯å°†â€œå·¥ä½œæ•°æ®â€å­˜å‚¨åˆ°äº†æ•°æ®åº“ä¸­å¹¶ä¸”å¹¿æ³›é€‚ç”¨äºæ‰€æœ‰æ•°æ®åº“ï¼Œè¿™æ—¢æœ‰åˆ©ï¼š</p>
<ul>
<li>ä»»åŠ¡é‡æ²¡æœ‰é™åˆ¶</li>
<li>æŒä¹…åŒ–ä»»åŠ¡ä¿¡æ¯</li>
<li>å¯é›†ç¾¤åŒ–</li>
<li>å¤±è´¥è½¬ç§»(fail-over, é›†ç¾¤åŒ–æƒ…å†µä¸‹ï¼Œå…¶ä¸­ä¸€å°ç³»ç»Ÿå´©æºƒä¼šè‡ªåŠ¨å°†ä»»åŠ¡è½¬ç§»åˆ°å…¶ä»–å¯ç”¨ç³»ç»Ÿä¸Š)</li>
</ul>
<p>ä¹Ÿæœ‰å¼Šï¼š</p>
<ul>
<li>æ²¡æœ‰RAMJobStoreæ–¹å¼é«˜æ•ˆ</li>
<li>å¢å¤§æ•°æ®åº“å‹åŠ›</li>
</ul>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œåˆ©è¿œå¤§äºå¼Šï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨quartzæ¡†æ¶éƒ½ä½¿ç”¨JDBCJobStoreè¿™ç§æ–¹å¼ã€‚</p>
<h3 id="ä¸¤ç§äº‹åŠ¡ç®¡ç†æ–¹å¼"><a href="#ä¸¤ç§äº‹åŠ¡ç®¡ç†æ–¹å¼" class="headerlink" title="ä¸¤ç§äº‹åŠ¡ç®¡ç†æ–¹å¼"></a>ä¸¤ç§äº‹åŠ¡ç®¡ç†æ–¹å¼</h3><p>quartzæä¾›äº†ä¸¤ç§äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼š</p>
<h4 id="JobStoreTX"><a href="#JobStoreTX" class="headerlink" title="JobStoreTX"></a>JobStoreTX</h4><p>quartzæ¡†æ¶è‡ªå·±ç®¡ç†äº‹åŠ¡ï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼</p>
<h4 id="JobStoreCMT"><a href="#JobStoreCMT" class="headerlink" title="JobStoreCMT"></a>JobStoreCMT</h4><p>å°†quartzæ¡†æ¶çš„äº‹åŠ¡é›†æˆåˆ°J2EEå®¹å™¨äº‹åŠ¡ä¸­ã€‚</p>
<h1 id="quartz-properties"><a href="#quartz-properties" class="headerlink" title="quartz.properties"></a>quartz.properties</h1><p>ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šé»˜è®¤è¯»å–classpathä¸‹çš„quartz.propertiesï¼Œæ‰€ä»¥æˆ‘ä»¬å°†é…ç½®éƒ½å†™åœ¨æ­¤æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­nameä¸åŒï¼ˆç”¨æ¥åŒºåˆ†schedulerï¼‰, åœ¨é›†ç¾¤ä¸­nameç›¸åŒ</span><br><span class="line">quartz.scheduler.instanceName=myScheduler</span><br><span class="line">#org.quartz.jobStore.dataSource=myDS</span><br><span class="line">#org.quartz.dataSource.myDS.driver=com.mysql.cj.jdbc.Driver</span><br><span class="line">#org.quartz.dataSource.myDS.URL=jdbc:mysql://localhost:3306/quartzdb?useUnicode=true&amp;characterEncoding=utf8</span><br><span class="line">#org.quartz.dataSource.myDS.user=root</span><br><span class="line">#org.quartz.dataSource.myDS.password=root</span><br><span class="line">#org.quartz.dataSource.myDS.maxConnections=10</span><br><span class="line"></span><br><span class="line"># å¯ä»¥ä¸ºä»»æ„å­—ç¬¦ä¸², ä½†å¿…é¡»ä¿æŒå”¯ä¸€, AUTO è‡ªåŠ¨ç”ŸæˆID, SYS_PROPä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡$&#123;org.quartz.scheduler.instanceId&#125;</span><br><span class="line">org.quartz.scheduler.instanceId=AUTO</span><br><span class="line"># æ˜¯å¦è·³è¿‡æ›´æ–°æ£€æŸ¥</span><br><span class="line">org.quartz.scheduler.skipUpdateCheck=true</span><br><span class="line"># æ˜¯å¦æ‰“å¼€quartzçš„JMXæ”¯æŒ</span><br><span class="line">org.quartz.scheduler.jmx.export=true</span><br><span class="line"># jobStoreç±»é…ç½®</span><br><span class="line">org.quartz.jobStore.class=org.quartz.impl.jdbcjobstore.JobStoreTX</span><br><span class="line"># é€šè¿‡JDBCè®¿é—®æ•°æ®åº“çš„ä»£ç†ç±»</span><br><span class="line">org.quartz.jobStore.driverDelegateClass=org.quartz.impl.jdbcjobstore.StdJDBCDelegate</span><br><span class="line"># quartzæ•°æ®è¡¨å‰ç¼€</span><br><span class="line"># org.quartz.jobStore.tablePrefix=T_B_QRTZ_</span><br><span class="line"># æ˜¯å¦ä½¿ç”¨é›†ç¾¤</span><br><span class="line">org.quartz.jobStore.isClustered=true</span><br><span class="line"># é›†ç¾¤çŠ¶æ€çš„æ›´æ–°æ—¶é—´é—´éš”</span><br><span class="line">org.quartz.jobStore.clusterCheckinInterval=20000</span><br><span class="line"># æœ€å¤§é”™è¯¯é‡è¯•æ¬¡æ•°</span><br><span class="line">org.quartz.jobStore.maxMisfiresToHandleAtATime=1</span><br><span class="line"># åœ¨Triggerè¢«è®¤ä¸ºæ˜¯é”™è¯¯è§¦å‘ä¹‹å‰, schedulerè¿˜å®¹è®¸Triggeré€šè¿‡å®ƒçš„ä¸‹æ¬¡è§¦å‘æ—¶é—´çš„ç§’æ•°, é»˜è®¤60000</span><br><span class="line">org.quartz.jobStore.misfireThreshold=120000</span><br><span class="line"># è°ƒç”¨setTransactionIsolation(Connection.TRANSACTION_SERIALIZABLE)æ–¹æ³•è®¾ç½®äº‹åŠ¡çº§åˆ«</span><br><span class="line">org.quartz.jobStore.txIsolationLevelSerializable=true</span><br><span class="line"># å¿…é¡»ä¸ºä¸€ä¸ªsqlå­—ç¬¦ä¸², æŸ¥è¯¢locksè¡¨é‡Œçš„ä¸€è¡Œ, &#123;0&#125;è¢«è¦†ç›–ä¸ºtablePrefix ? è¢«è¦†ç›–ä¸ºscheduler&apos;s name</span><br><span class="line">org.quartz.jobStore.selectWithLockSQL=SELECT * FROM &#123;0&#125;LOCKS WHERE LOCK_NAME = ? FOR UPDATE</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨çš„çº¿ç¨‹æ± å®ä¾‹</span><br><span class="line">org.quartz.threadPool.class=org.quartz.simpl.SimpleThreadPool</span><br><span class="line"># çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°, å¾ˆå¤§å–å†³äºä»»åŠ¡çš„æ€§è´¨å’Œç³»ç»Ÿèµ„æº</span><br><span class="line">org.quartz.threadPool.threadCount=10</span><br><span class="line"># çº¿ç¨‹çš„ä¼˜å…ˆçº§, ä»‹äºThread.MIN_PRIORITY(1)å’ŒThread.PRIORITY(10), é»˜è®¤Thread.NORM_PRIORITY(5)</span><br><span class="line">org.quartz.threadPool.threadPriority=5</span><br><span class="line"># åŠ è½½ä»»åŠ¡ä»£ç çš„ClassLoaderæ˜¯å¦ä»å¤–éƒ¨ç»§æ‰¿</span><br><span class="line">org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread=true</span><br><span class="line"># triggerå†å²è®°å½•æ’ä»¶</span><br><span class="line">org.quartz.plugin.triggHistory.class=org.quartz.plugins.history.LoggingJobHistoryPlugin</span><br><span class="line"># shutdown-hook æ’ä»¶æ•æ‰JVMå…³é—­æ—¶é—´å¹¶è°ƒç”¨schedulerçš„shutdownæ–¹æ³•</span><br><span class="line">org.quartz.plugin.shutdownhook.class=org.quartz.plugins.management.ShutdownHookPlugin</span><br><span class="line">org.quartz.plugin.shutdownhook.cleanShutdown=true</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œæˆ‘æ³¨é‡Šæ‰äº†å…³äºæ•°æ®åº“è¿æ¥ä¿¡æ¯çš„é…ç½®ï¼Œå†³å®šåœ¨quartConfig.javaæ–‡ä»¶ä¸­æ³¨å…¥dataSourceã€‚</p>
<h1 id="SpringJobFactoryConfig-java"><a href="#SpringJobFactoryConfig-java" class="headerlink" title="SpringJobFactoryConfig.java"></a>SpringJobFactoryConfig.java</h1><p>åœ¨Jobæ‰§è¡Œç±»ä¸­ï¼Œæ— æ³•æ³¨å…¥Springå®¹å™¨ä¸­çš„beanï¼Œå› ä¸ºSpringå®¹å™¨å’Œquartzå®¹å™¨æ˜¯éš”ç¦»å¼€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨Springæä¾›çš„AutowireCapableBeanFactoryï¼ˆå¯è£…é…applicationContextä¹‹å¤–çš„beanï¼‰å’Œé‡å†™AdaptableJobFactoryä¸­çš„createJobInstanceæ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TODO è‡ªå®šä¹‰JobFactory, ä¸ºäº†æ³¨å…¥jobInstanceä¸­çš„<span class="doctag">@Autowired</span> <span class="doctag">@Resource</span>ç­‰å®ä¾‹</span></span><br><span class="line"><span class="comment"> * Created by jinzili on 25/09/2017.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringJobFactoryConfig</span> <span class="keyword">extends</span> <span class="title">AdaptableJobFactory</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è£…é…applicationContextç®¡ç†ä¹‹å¤–çš„bean</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AutowireCapableBeanFactory capableBeanFactory;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">createJobInstance</span><span class="params">(TriggerFiredBundle bundle)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Object jobInstance = <span class="keyword">super</span>.createJobInstance(bundle);</span><br><span class="line">        <span class="comment">// è£…é…jobInstance</span></span><br><span class="line">        capableBeanFactory.autowireBean(jobInstance);</span><br><span class="line">        <span class="keyword">return</span> jobInstance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="QuartzConfig-java"><a href="#QuartzConfig-java" class="headerlink" title="QuartzConfig.java"></a>QuartzConfig.java</h1><p>å°†è‡ªå®šä¹‰çš„JobFactoryé…ç½®åˆ°SchedulerFactoryBeanå’ŒSchedulerï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuartzConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SpringJobFactoryConfig springJobFactory;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Qualifier</span>(<span class="string">"dataSource"</span>)</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SchedulerFactoryBean <span class="title">schedulerFactoryBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SchedulerFactoryBean factory = <span class="keyword">new</span> SchedulerFactoryBean();</span><br><span class="line">        <span class="comment">// æ˜¯å¦è¦†ç›–å·²å­˜åœ¨çš„job</span></span><br><span class="line">        factory.setOverwriteExistingJobs(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// é…ç½®æ•°æ®æº</span></span><br><span class="line">        System.out.println(dataSource);</span><br><span class="line">        factory.setDataSource(dataSource);</span><br><span class="line">        <span class="comment">// å¯åŠ¨å»¶æ—¶</span></span><br><span class="line">        factory.setStartupDelay(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">// æ˜¯å¦è‡ªåŠ¨å¯åŠ¨</span></span><br><span class="line">        factory.setAutoStartup(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//        factory.setQuartzProperties(this.quartzProperties());</span></span><br><span class="line">        factory.setApplicationContextSchedulerContextKey(<span class="string">"applicationContext"</span>);</span><br><span class="line">        <span class="comment">// é…ç½®è‡ªå®šä¹‰JobFactory</span></span><br><span class="line">        factory.setJobFactory(springJobFactory);</span><br><span class="line">        <span class="keyword">return</span> factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Scheduler <span class="title">scheduler</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> schedulerFactoryBean().getScheduler();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å…¶ä»–beanä¸­é€šè¿‡æ³¨å…¥scheduleræ¥å¢åˆ æ”¹æŸ¥Jobã€‚</p>
<p>è‡³æ­¤ï¼Œä¸€ä¸ªæœ‰å¯æŒä¹…åŒ–ï¼Œé›†ç¾¤åŒ–ï¼Œå¤±è´¥è½¬ç§»çš„åŠŸèƒ½çš„quartzæ¡†æ¶å°±æ­å»ºå¥½äº†ã€‚</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">


    <div class="bdsharebuttonbox">
    <a href="#" class="bds_more" data-cmd="more">åˆ†äº«åˆ°ï¼š</a>
    <a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´">QQç©ºé—´</a>
    <a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš">æ–°æµªå¾®åš</a>
    <a href="#" class="bds_tqq" data-cmd="tqq" title="åˆ†äº«åˆ°è…¾è®¯å¾®åš">è…¾è®¯å¾®åš</a>
    <a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘">äººäººç½‘</a>
    <a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡">å¾®ä¿¡</a>
</div>
<script>
window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<style>
    .bdshare_popup_box {
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .bdshare-button-style0-16 a,
    .bdshare-button-style0-16 .bds_more {
        padding-left: 20px;
        margin: 6px 10px 6px 0;
    }
    .bdshare_dialog_list a,
    .bdshare_popup_list a,
    .bdshare_popup_bottom a {
        font-family: 'Microsoft Yahei';
    }
    .bdshare_popup_top {
        display: none;
    }
    .bdshare_popup_bottom {
        height: auto;
        padding: 5px;
    }
</style>


</div>

            
    
        <a href="http://www.jinzili.cc/2017/10/19/quartzé›†ç¾¤é…ç½®/#comments" class="article-comment-link">è¯„è®º</a>
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/2/">&laquo; ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">ä¸‹ä¸€é¡µ &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/05/18/Idea-è®¾ç½®Mavené¡¹ç›®JDKç‰ˆæœ¬/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Q-A/">Q&A</a></p>
                            <p class="item-title"><a href="/2019/05/18/Idea-è®¾ç½®Mavené¡¹ç›®JDKç‰ˆæœ¬/" class="title">Idea - è®¾ç½®Mavené¡¹ç›®JDKç‰ˆæœ¬</a></p>
                            <p class="item-date"><time datetime="2019-05-18T03:34:14.000Z" itemprop="datePublished">2019-05-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/05/18/Java-Aviator/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/JavaBase/">JavaBase</a></p>
                            <p class="item-title"><a href="/2019/05/18/Java-Aviator/" class="title">Java - Aviator</a></p>
                            <p class="item-date"><time datetime="2019-05-18T03:29:13.000Z" itemprop="datePublished">2019-05-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/11/05/Netty-çŸ¥è¯†ç‚¹/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Netty/">Netty</a></p>
                            <p class="item-title"><a href="/2018/11/05/Netty-çŸ¥è¯†ç‚¹/" class="title">Netty - çŸ¥è¯†ç‚¹</a></p>
                            <p class="item-date"><time datetime="2018-11-05T05:02:02.000Z" itemprop="datePublished">2018-11-05</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/11/05/å¤§æ•°æ®å­¦ä¹ -MapReduce/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/å¤§æ•°æ®/">å¤§æ•°æ®</a></p>
                            <p class="item-title"><a href="/2018/11/05/å¤§æ•°æ®å­¦ä¹ -MapReduce/" class="title">å¤§æ•°æ®å­¦ä¹  - MapReduce</a></p>
                            <p class="item-date"><time datetime="2018-11-05T05:01:24.000Z" itemprop="datePublished">2018-11-05</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/11/05/Nettyæ¶æ„å‰–æ/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Netty/">Netty</a></p>
                            <p class="item-title"><a href="/2018/11/05/Nettyæ¶æ„å‰–æ/" class="title">Nettyæ¶æ„å‰–æ</a></p>
                            <p class="item-date"><time datetime="2018-11-05T05:00:36.000Z" itemprop="datePublished">2018-11-05</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">åˆ†ç±»</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Framework/">Java Framework</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaBase/">JavaBase</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Netty/">Netty</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Q-A/">Q&A</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/">Spring Cloud</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/å¤§æ•°æ®/">å¤§æ•°æ®</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/å¼€å‘å¿ƒå¾—/">å¼€å‘å¿ƒå¾—</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯æ‚è°ˆ/">æŠ€æœ¯æ‚è°ˆ</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/éšç¬”/">éšç¬”</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">å½’æ¡£</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">åä¸€æœˆ 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">ä¹æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">å…«æœˆ 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">ä¸ƒæœˆ 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">å…­æœˆ 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">ä¸€æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">åäºŒæœˆ 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">åä¸€æœˆ 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">åæœˆ 2017</a><span class="archive-list-count">14</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">æ ‡ç­¾</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Deep-Clone/">Deep Clone</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eureka/">Eureka</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Feign/">Feign</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDFS/">HDFS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hibernate/">Hibernate</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Http/">Http</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/">IO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JMS/">JMS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaUtils/">JavaUtils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MapReduce/">MapReduce</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis/">Mybatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Netty/">Netty</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Q-A/">Q&A</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPC/">RPC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ribbon/">Ribbon</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringCloud/">SpringCloud</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringDataJPA/">SpringDataJPA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/">SpringMVC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/">WebSocket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aviator/">aviator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos7/">centos7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dashboard/">dashboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/">k8s</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubeadm/">kubeadm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/">kubernetes</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netty/">netty</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/online/">online</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/quartz/">quartz</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/synchronized/">synchronized</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zookeeper/">zookeeper</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ä¸‹è½½æ–‡ä»¶/">ä¸‹è½½æ–‡ä»¶</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/åŸå­æ€§/">åŸå­æ€§</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/åå°„/">åå°„</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¤šçº¿ç¨‹/">å¤šçº¿ç¨‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¤§æ•°æ®/">å¤§æ•°æ®</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¹¶å‘åŒ…/">å¹¶å‘åŒ…</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¼€å‘å¿ƒå¾—/">å¼€å‘å¿ƒå¾—</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¿ƒæƒ…/">å¿ƒæƒ…</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç±»åŠ è½½/">ç±»åŠ è½½</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/èŠå¤©å®¤/">èŠå¤©å®¤</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è·¨åŸŸ/">è·¨åŸŸ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é”/">é”</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/éšç¬”/">éšç¬”</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
        <div class="widget tagcloud">
            <a href="/tags/Deep-Clone/" style="font-size: 10px;">Deep Clone</a> <a href="/tags/Eureka/" style="font-size: 10px;">Eureka</a> <a href="/tags/Feign/" style="font-size: 10px;">Feign</a> <a href="/tags/HDFS/" style="font-size: 10px;">HDFS</a> <a href="/tags/Hibernate/" style="font-size: 10px;">Hibernate</a> <a href="/tags/Http/" style="font-size: 10px;">Http</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/JMS/" style="font-size: 10px;">JMS</a> <a href="/tags/JavaUtils/" style="font-size: 10px;">JavaUtils</a> <a href="/tags/MapReduce/" style="font-size: 10px;">MapReduce</a> <a href="/tags/Mybatis/" style="font-size: 10px;">Mybatis</a> <a href="/tags/Netty/" style="font-size: 13.33px;">Netty</a> <a href="/tags/Q-A/" style="font-size: 10px;">Q&A</a> <a href="/tags/RPC/" style="font-size: 10px;">RPC</a> <a href="/tags/Ribbon/" style="font-size: 10px;">Ribbon</a> <a href="/tags/SpringCloud/" style="font-size: 10px;">SpringCloud</a> <a href="/tags/SpringDataJPA/" style="font-size: 10px;">SpringDataJPA</a> <a href="/tags/SpringMVC/" style="font-size: 13.33px;">SpringMVC</a> <a href="/tags/WebSocket/" style="font-size: 10px;">WebSocket</a> <a href="/tags/aviator/" style="font-size: 10px;">aviator</a> <a href="/tags/centos7/" style="font-size: 10px;">centos7</a> <a href="/tags/dashboard/" style="font-size: 10px;">dashboard</a> <a href="/tags/docker/" style="font-size: 13.33px;">docker</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/k8s/" style="font-size: 13.33px;">k8s</a> <a href="/tags/kubeadm/" style="font-size: 10px;">kubeadm</a> <a href="/tags/kubernetes/" style="font-size: 16.67px;">kubernetes</a> <a href="/tags/netty/" style="font-size: 10px;">netty</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/online/" style="font-size: 10px;">online</a> <a href="/tags/quartz/" style="font-size: 16.67px;">quartz</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/synchronized/" style="font-size: 10px;">synchronized</a> <a href="/tags/web/" style="font-size: 13.33px;">web</a> <a href="/tags/zookeeper/" style="font-size: 13.33px;">zookeeper</a> <a href="/tags/ä¸‹è½½æ–‡ä»¶/" style="font-size: 10px;">ä¸‹è½½æ–‡ä»¶</a> <a href="/tags/åŸå­æ€§/" style="font-size: 10px;">åŸå­æ€§</a> <a href="/tags/åå°„/" style="font-size: 10px;">åå°„</a> <a href="/tags/å¤šçº¿ç¨‹/" style="font-size: 10px;">å¤šçº¿ç¨‹</a> <a href="/tags/å¤§æ•°æ®/" style="font-size: 20px;">å¤§æ•°æ®</a> <a href="/tags/å¹¶å‘åŒ…/" style="font-size: 10px;">å¹¶å‘åŒ…</a> <a href="/tags/å¼€å‘å¿ƒå¾—/" style="font-size: 10px;">å¼€å‘å¿ƒå¾—</a> <a href="/tags/å¿ƒæƒ…/" style="font-size: 10px;">å¿ƒæƒ…</a> <a href="/tags/ç±»åŠ è½½/" style="font-size: 13.33px;">ç±»åŠ è½½</a> <a href="/tags/èŠå¤©å®¤/" style="font-size: 10px;">èŠå¤©å®¤</a> <a href="/tags/è·¨åŸŸ/" style="font-size: 10px;">è·¨åŸŸ</a> <a href="/tags/é”/" style="font-size: 10px;">é”</a> <a href="/tags/éšç¬”/" style="font-size: 10px;">éšç¬”</a>
        </div>
    </div>

    
    <div id="toTop" class="fas fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2019 zili<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    
    <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
    <script type="text/javascript">
     (function(d, s) {
         var j, e = d.getElementsByTagName(s)[0];

         if (typeof LivereTower === 'function') { return; }

         j = d.createElement(s);
         j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
         j.async = true;

         e.parentNode.insertBefore(j, e);
     })(document, 'script');
    </script>
  <noscript> ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
  <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->





    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>